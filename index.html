<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Trading Pattern Analyzer - ICT Strategies</title>
<style>
/* CSS Mantido e Otimizado */
:root {
    --primary-bg: #0f1117;
    --secondary-bg: #1a1d25;
    --accent-color: #00b894;
    --danger-color: #ff4757;
    --success-color: #2ed573;
    --text-color: #f1f2f6;
    --grid-color: #2f3542;
}

body {
    margin: 0;
    padding: 20px;
    font-family: 'Inter', sans-serif;
    background-color: var(--primary-bg);
    color: var(--text-color);
}

.container {
    max-width: 1400px;
    margin: 0 auto;
}

.dashboard {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-top: 20px;
}

.chart-container, .analysis-container {
    background: var(--secondary-bg);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.upload-zone {
    border: 2px dashed #384056;
    border-radius: 8px;
    padding: 40px;
    text-align: center;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.02);
    transition: border-color 0.3s ease;
}

.upload-zone:hover {
    border-color: var(--accent-color);
}

.chart-canvas {
    width: 100%;
    height: 500px;
    background: var(--primary-bg);
    border-radius: 8px;
}

.signal-panel, .alert {
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
}

.signal-panel {
    background: linear-gradient(45deg, var(--secondary-bg), rgba(46, 213, 115, 0.1));
    border-left: 4px solid var(--success-color);
}

.alert {
    animation: pulse 2s infinite;
    background: rgba(255, 71, 87, 0.1);
    border-left: 4px solid var(--danger-color);
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}
</style>
</head>
<body>
<div class="container">
    <h1>ICT Advanced Trading Pattern Analyzer</h1>
    <div class="dashboard">
        <div class="chart-container">
            <div class="upload-zone" id="uploadZone">
                <h3>游늳 Upload do Gr치fico de 1 Minuto</h3>
                <p>Arraste e solte seu gr치fico aqui ou clique para selecionar</p>
                <small>Formatos suportados: PNG, JPG, JPEG</small>
                <input type="file" id="chartInput" hidden accept="image/*">
            </div>
            <canvas id="analysisCanvas" class="chart-canvas"></canvas>
        </div>
        
        <div class="analysis-container">
            <div class="signal-panel">
                <h3>游꿢 Sinal de Trading</h3>
                <div class="pattern-strength">
                    <span>Probabilidade: <strong id="tradeProbability">Alta</strong></span>
                </div>
                <p><strong>Dire칞칚o:</strong> <span id="tradeDirection">Compra</span></p>
                <p><strong>Entrada:</strong> <span id="entryPrice">20,438.75</span></p>
                <p><strong>Stop Loss:</strong> <span id="stopLoss">20,432.25</span></p>
                <p><strong>Take Profit:</strong> <span id="takeProfit">20,455.00</span></p>
                <p><strong>Risco/Recompensa:</strong> <span id="riskReward">1:2.5</span></p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chartInput = document.getElementById('chartInput');
    const analysisCanvas = document.getElementById('analysisCanvas');
    const ctx = analysisCanvas.getContext('2d');

    // Manter esta parte simples e reativa para UX melhor
    chartInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            processChart(file);
        }
    });

    function processChart(file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor, selecione uma imagem v치lida.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                ctx.drawImage(img, 0, 0);
                analyzePattern();
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function analyzePattern() {
        // Algoritmo para analisar padr칫es ICT
        const zones = identifyZones();
        drawZones(zones);
        suggestTrade(zones);
    }

    function identifyZones() {
        // Exemplo de l칩gica simplificada de detec칞칚o de zonas, adicionar AI/ML poss칤vel aqui
        return {
            breaker: { high: 20445.50, low: 20432.25 },
            fvg: { high: 20441.25, low: 20438.75 },
            orderBlocks: { buy: 20435.00, sell: 20447.50 }
        };
    }

    function drawZones(zones) {
        ctx.strokeStyle = '#00b894';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 3]);
        // Desenhar Breakers, FVGs e OBs conforme detectado
    }

    function suggestTrade(zones) {
        // C치lculo de R/R com base nas zonas encontradas
        const entry = zones.fvg.low;
        const stopLoss = zones.breaker.low;
        const takeProfit = entry + (entry - stopLoss) * 2; // Calcula R/R 1:2

        document.getElementById('entryPrice').textContent = entry;
        document.getElementById('stopLoss').textContent = stopLoss;
        document.getElementById('takeProfit').textContent = takeProfit;
        document.getElementById('riskReward').textContent = "1:2";
    }
});
</script>
</body>
</html>
