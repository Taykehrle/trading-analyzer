<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Trading Pattern Analyzer - ICT Strategies</title>
<style>
/* CSS Mantido e Otimizado */
:root {
    --primary-bg: #0f1117;
    --secondary-bg: #1a1d25;
    --accent-color: #00b894;
    --danger-color: #ff4757;
    --success-color: #2ed573;
    --text-color: #f1f2f6;
    --grid-color: #2f3542;
}

body {
    margin: 0;
    padding: 20px;
    font-family: 'Inter', sans-serif;
    background-color: var(--primary-bg);
    color: var(--text-color);
}

.container {
    max-width: 1400px;
    margin: 0 auto;
}

.dashboard {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-top: 20px;
}

.chart-container, .analysis-container {
    background: var(--secondary-bg);
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.upload-zone {
    border: 2px dashed #384056;
    border-radius: 8px;
    padding: 40px;
    text-align: center;
    cursor: pointer;
    background: rgba(255, 255, 255, 0.02);
    transition: border-color 0.3s ease;
}

.upload-zone:hover {
    border-color: var(--accent-color);
}

.chart-canvas {
    width: 100%;
    height: 500px;
    background: var(--primary-bg);
    border-radius: 8px;
}

.signal-panel, .alert {
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
}

.signal-panel {
    background: linear-gradient(45deg, var(--secondary-bg), rgba(46, 213, 115, 0.1));
    border-left: 4px solid var(--success-color);
}

.alert {
    animation: pulse 2s infinite;
    background: rgba(255, 71, 87, 0.1);
    border-left: 4px solid var(--danger-color);
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}
</style>
</head>
<body>
<div class="container">
    <h1>ICT Advanced Trading Pattern Analyzer</h1>
    <div class="dashboard">
        <div class="chart-container">
            <div class="upload-zone" id="uploadZone">
                <h3>üìà Upload do Gr√°fico de 1 Minuto</h3>
                <p>Arraste e solte seu gr√°fico aqui ou clique para selecionar</p>
                <small>Formatos suportados: PNG, JPG, JPEG</small>
                <input type="file" id="chartInput" hidden accept="image/*">
            </div>
            <canvas id="analysisCanvas" class="chart-canvas"></canvas>
        </div>
        
        <div class="analysis-container">
            <div class="signal-panel">
                <h3>üéØ Sinal de Trading</h3>
                <div class="pattern-strength">
                    <span>Probabilidade: <strong id="tradeProbability">Alta</strong></span>
                </div>
                <p><strong>Dire√ß√£o:</strong> <span id="tradeDirection">Compra</span></p>
                <p><strong>Entrada:</strong> <span id="entryPrice">20,438.75</span></p>
                <p><strong>Stop Loss:</strong> <span id="stopLoss">20,432.25</span></p>
                <p><strong>Take Profit:</strong> <span id="takeProfit">20,455.00</span></p>
                <p><strong>Risco/Recompensa:</strong> <span id="riskReward">1:2.5</span></p>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const chartInput = document.getElementById('chartInput');
    const analysisCanvas = document.getElementById('analysisCanvas');
    const ctx = analysisCanvas.getContext('2d');

    // Manter esta parte simples e reativa para UX melhor
    chartInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            processChart(file);
        }
    });

    function processChart(file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor, selecione uma imagem v√°lida.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                ctx.drawImage(img, 0, 0);
                analyzePattern();
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function analyzePattern() {
        // Algoritmo para analisar padr√µes ICT
        const zones = identifyZones();
        drawZones(zones);
        suggestTrade(zones);
    }

    function identifyZones() {
        // Exemplo de l√≥gica simplificada de detec√ß√£o de zonas, adicionar AI/ML poss√≠vel aqui
        return {
            breaker: { high: 20445.50, low: 20432.25 },
            fvg: { high: 20441.25, low: 20438.75 },
            orderBlocks: { buy: 20435.00, sell: 20447.50 }
        };
    }

    function drawZones(zones) {
        ctx.strokeStyle = '#00b894';
        ctx.lineWidth = 2;
        ctx.setLineDash([5, 3]);
        // Desenhar Breakers, FVGs e OBs conforme detectado
    }

    function suggestTrade(zones) {
        // C√°lculo de R/R com base nas zonas encontradas
        const entry = zones.fvg.low;
        const stopLoss = zones.breaker.low;
        const takeProfit = entry + (entry - stopLoss) * 2; // Calcula R/R 1:2

        document.getElementById('entryPrice').textContent = entry;
        document.getElementById('stopLoss').textContent = stopLoss;
        document.getElementById('takeProfit').textContent = takeProfit;
        document.getElementById('riskReward').textContent = "1:2";
    }
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadZone = document.getElementById('uploadZone');
    const chartInput = document.getElementById('chartInput');
    const analysisCanvas = document.getElementById('analysisCanvas');
    const ctx = analysisCanvas.getContext('2d');

    uploadZone.addEventListener('click', () => {
        chartInput.click();
    });

    uploadZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadZone.style.borderColor = '#00b894';
    });

    uploadZone.addEventListener('dragleave', () => {
        uploadZone.style.borderColor = '#384056';
    });

    uploadZone.addEventListener('drop', (e) => {
        e.preventDefault();
        const file = e.dataTransfer.files[0];
        if (file) {
            processChart(file);
        }
    });

    chartInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            processChart(file);
        }
    });

    function processChart(file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor, selecione uma imagem v√°lida.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                analysisCanvas.width = img.width;
                analysisCanvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                analyzePattern();
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function analyzePattern() {
        // Simula√ß√£o de Identifica√ß√£o de Padr√µes
        const patternDetected = Math.random() > 0.5; // Simula uma chance de 50% de encontrar um padr√£o

        if (patternDetected) {
            displayTradingSignal({
                direction: 'Compra',
                entryPrice: 20438.75,
                stopLoss: 20432.25,
                takeProfit: 20455.00,
                riskReward: '1:2.5',
                probability: 'Alta'
            });
        } else {
            displayTradingSignal(null);
        }
    }

    function displayTradingSignal(signal) {
        const tradingSignalElement = document.querySelector('.signal-panel');
        if (signal) {
            document.getElementById('tradeDirection').textContent = signal.direction;
            document.getElementById('entryPrice').textContent = signal.entryPrice;
            document.getElementById('stopLoss').textContent = signal.stopLoss;
            document.getElementById('takeProfit').textContent = signal.takeProfit;
            document.getElementById('riskReward').textContent = signal.riskReward;
            document.getElementById('tradeProbability').textContent = signal.probability;
            tradingSignalElement.style.display = 'block';
        } else {
            alert('Nenhum padr√£o de trading foi identificado no gr√°fico.');
            tradingSignalElement.style.display = 'none';
        }
    }

    // Inicializa√ß√£o responsiva do canvas
    function resizeCanvas() {
        const parent = analysisCanvas.parentElement;
        analysisCanvas.width = parent.clientWidth - 40; // 40px para padding
        analysisCanvas.height = analysisCanvas.width * 0.6;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadZone = document.getElementById('uploadZone');
    const chartInput = document.getElementById('chartInput');
    const analysisCanvas = document.getElementById('analysisCanvas');
    const ctx = analysisCanvas.getContext('2d');

    uploadZone.addEventListener('click', () => {
        chartInput.click();
    });

    uploadZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadZone.style.borderColor = '#00b894';
    });

    uploadZone.addEventListener('dragleave', () => {
        uploadZone.style.borderColor = '#384056';
    });

    uploadZone.addEventListener('drop', (e) => {
        e.preventDefault();
        const file = e.dataTransfer.files[0];
        if (file) {
            processChart(file);
        }
    });

    chartInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            processChart(file);
        }
    });

    function processChart(file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor, selecione uma imagem v√°lida.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                analysisCanvas.width = img.width;
                analysisCanvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                analyzePattern();
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function analyzePattern() {
        // Simula√ß√£o de Identifica√ß√£o de Padr√µes Simples Baseados em Pre√ßos
        // Neste exemplo, vamos detectar um FVG (Fair Value Gap) e usar l√≥gica b√°sica para identificar zonas.
        const examplePriceData = {
            open: 20400,
            high: 20450,
            low: 20430,
            close: 20435
        };

        // Exemplo de l√≥gica para detectar um FVG baseado em dados simulados:
        const detectedFVG = detectFVG(examplePriceData);
        const detectedBreaker = detectBreaker(examplePriceData);

        if (detectedFVG || detectedBreaker) {
            const signal = {
                direction: detectedBreaker ? 'Venda' : 'Compra',
                entryPrice: detectedFVG ? examplePriceData.close : examplePriceData.low,
                stopLoss: detectedFVG ? examplePriceData.low : examplePriceData.open,
                takeProfit: detectedFVG ? examplePriceData.close + 20 : examplePriceData.open - 20,
                riskReward: '1:2.5',
                probability: 'Alta'
            };
            displayTradingSignal(signal);
        } else {
            alert('Nenhum padr√£o de trading foi identificado no gr√°fico.');
            document.querySelector('.signal-panel').style.display = 'none';
        }
    }

    // Fun√ß√£o Simples para Detectar FVGs:
    function detectFVG(data) {
        // Padr√£o FVG se houver uma diferen√ßa significativa entre pre√ßo de alta e de baixa
        return (data.high - data.low) > 15; // Crit√©rio exemplo
    }

    // Fun√ß√£o Simples para Detectar Breakers:
    function detectBreaker(data) {
        // Padr√£o Breaker se houver um rompimento seguido de reteste no fechamento
        return data.close < data.open && (data.high - data.close) < 10; // Crit√©rio exemplo
    }

    function displayTradingSignal(signal) {
        document.getElementById('tradeDirection').textContent = signal.direction;
        document.getElementById('entryPrice').textContent = signal.entryPrice;
        document.getElementById('stopLoss').textContent = signal.stopLoss;
        document.getElementById('takeProfit').textContent = signal.takeProfit;
        document.getElementById('riskReward').textContent = signal.riskReward;
        document.getElementById('tradeProbability').textContent = signal.probability;
        document.querySelector('.signal-panel').style.display = 'block';
    }

    // Inicializa√ß√£o responsiva do canvas
    function resizeCanvas() {
        const parent = analysisCanvas.parentElement;
        analysisCanvas.width = parent.clientWidth - 40; // 40px para padding
        analysisCanvas.height = analysisCanvas.width * 0.6;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadZone = document.getElementById('uploadZone');
    const chartInput = document.getElementById('chartInput');
    const analysisCanvas = document.getElementById('analysisCanvas');
    const ctx = analysisCanvas.getContext('2d');

    uploadZone.addEventListener('click', () => {
        chartInput.click();
    });

    uploadZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadZone.style.borderColor = '#00b894';
    });

    uploadZone.addEventListener('dragleave', () => {
        uploadZone.style.borderColor = '#384056';
    });

    uploadZone.addEventListener('drop', (e) => {
        e.preventDefault();
        const file = e.dataTransfer.files[0];
        if (file) {
            processChart(file);
        }
    });

    chartInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
            processChart(file);
        }
    });

    function processChart(file) {
        if (!file.type.startsWith('image/')) {
            alert('Por favor, selecione uma imagem v√°lida.');
            return;
        }

        const reader = new FileReader();
        reader.onload = (e) => {
            const img = new Image();
            img.onload = () => {
                analysisCanvas.width = img.width;
                analysisCanvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                analyzePattern();
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    }

    function analyzePattern() {
        // Crit√©rios Melhorados de Detec√ß√£o de Padr√µes
        const priceData = getPriceDataExample(); // Simulando a coleta de dados de pre√ßo
        const detectedFVG = detectFVG(priceData);
        const detectedBreaker = detectBreaker(priceData);

        if (detectedFVG || detectedBreaker) {
            const signal = generateSignal(detectedFVG, detectedBreaker, priceData);
            displayTradingSignal(signal);
        } else {
            alert('Nenhum padr√£o de trading foi identificado no gr√°fico.');
            document.querySelector('.signal-panel').style.display = 'none';
        }
    }

    function getPriceDataExample() {
        // Simula√ß√£o de dados de pre√ßos para an√°lise (Open, High, Low, Close)
        return {
            open: 20420,
            high: 20460,
            low: 20415,
            close: 20435
        };
    }

    function detectFVG(data) {
        // Crit√©rio: Se o pre√ßo "high" de uma vela e o pre√ßo "low" da vela anterior tiverem uma grande diferen√ßa
        const gap = data.high - data.low;
        return gap > 10; // Crit√©rio exemplo: 10 pontos
    }

    function detectBreaker(data) {
        // Crit√©rio: Um "Breaker" ocorre se houver um rompimento seguido por um reteste e rejei√ß√£o
        return (data.open > data.close) && ((data.high - data.close) < 5); // Condi√ß√£o simplificada
    }

    function generateSignal(fvg, breaker, data) {
        let direction = '';
        let entryPrice = 0;
        let stopLoss = 0;
        let takeProfit = 0;

        if (fvg) {
            direction = 'Compra'; // Padr√£o baseado no FVG identificado
            entryPrice = data.low + 10; // Ajustar para pre√ßo de entrada otimizado
            stopLoss = data.low; // Usar o "low" como stop
            takeProfit = entryPrice + 2 * (entryPrice - stopLoss);
        } else if (breaker) {
            direction = 'Venda'; // Padr√£o baseado no Breaker
            entryPrice = data.high - 5;
            stopLoss = data.high;
            takeProfit = entryPrice - 2 * (stopLoss - entryPrice);
        }

        return {
            direction: direction,
            entryPrice: entryPrice,
            stopLoss: stopLoss,
            takeProfit: takeProfit,
            riskReward: '1:2',
            probability: 'Alta'
        };
    }

    function displayTradingSignal(signal) {
        document.getElementById('tradeDirection').textContent = signal.direction;
        document.getElementById('entryPrice').textContent = signal.entryPrice;
        document.getElementById('stopLoss').textContent = signal.stopLoss;
        document.getElementById('takeProfit').textContent = signal.takeProfit;
        document.getElementById('riskReward').textContent = signal.riskReward;
        document.getElementById('tradeProbability').textContent = signal.probability;
        document.querySelector('.signal-panel').style.display = 'block';
    }

    // Inicializa√ß√£o responsiva do canvas
    function resizeCanvas() {
        const parent = analysisCanvas.parentElement;
        analysisCanvas.width = parent.clientWidth - 40; // 40px para padding
        analysisCanvas.height = analysisCanvas.width * 0.6;
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();
});
</script>
</body>
</html>
